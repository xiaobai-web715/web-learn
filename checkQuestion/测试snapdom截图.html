<html>
    <head>
        <script src="https://cdn.jsdelivr.net/npm/@zumer/snapdom/dist/snapdom.min.js"></script>
        <style>
            .container {
                width: 100px;
                height: 100px;
                background-color: red;
            }
            .test {
                width: 100px;
                height: 100px;
                background-image: url('../././images/1.png');
            }
            .placeholder {
                height: 1000px;
                width: 100%;
            }
        </style>
        <script>
            function getCanvasImage() {
                console.log('测试页面截图效果', snapdom);
                snapdom.toCanvas(document.body).then((canvas) => {
                    canvas.toBlob((blob) => {
                        if (blob instanceof Blob) {
                            const url = URL.createObjectURL(blob);
                            const a = document.createElement('a');
                            a.href = url;
                            a.download = 'screenshot.png';
                            a.click();
                            URL.revokeObjectURL(url);
                        }
                    });
                });
            }
        </script>

        <script>
            async function testAwaitToPromiseReject() {
                function myPromise () {
                    return new Promise((resolve, reject) => {
                        setTimeout(() => {
                            reject(123)
                        })
                    })
                }

                const result = await myPromise()
                console.log("我是打印的错误日志", result);
                (() => {
                    console.log("测试后续还能够执行吗")
                })()
            }
        </script>
    </head>
    <body>
        <div class="container"></div>
        <div class="test"></div>
        <button onclick="getCanvasImage()">测试页面截图,图片资源不存在的问题</button>

        <button onclick="testAwaitToPromiseReject()">测试</button>

        <div class="placeholder"></div>
    </body>
</html>
